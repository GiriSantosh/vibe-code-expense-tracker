# Docker-specific configuration for expense tracker application

# Database Configuration (PostgreSQL in Docker)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/expense_tracker}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.postgresql.Driver}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}

# OAuth2 Configuration (Keycloak in Docker)
spring.security.oauth2.client.registration.keycloak.client-id=expense-tracker-backend
spring.security.oauth2.client.registration.keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:your-client-secret}
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

spring.security.oauth2.client.provider.keycloak.authorization-uri=${SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_KEYCLOAK_AUTHORIZATION_URI:http://keycloak:8080/realms/expense-tracker/protocol/openid-connect/auth}
spring.security.oauth2.client.provider.keycloak.token-uri=${SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_KEYCLOAK_TOKEN_URI:http://keycloak:8080/realms/expense-tracker/protocol/openid-connect/token}
spring.security.oauth2.client.provider.keycloak.user-info-uri=${SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_KEYCLOAK_USER_INFO_URI:http://keycloak:8080/realms/expense-tracker/protocol/openid-connect/userinfo}
spring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username
spring.security.oauth2.client.provider.keycloak.jwk-set-uri=${SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_KEYCLOAK_JWK_SET_URI:http://keycloak:8080/realms/expense-tracker/protocol/openid-connect/certs}

# PII Encryption Configuration
encryption.algorithm=AES/GCM/NoPadding
encryption.key-length=256
encryption.iv-length=12
encryption.tag-length=16
encryption.master-key=${ENCRYPTION_MASTER_KEY:defaultKey123456789012345678901234}

# CORS Configuration
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8081}

# Actuator Configuration (for health checks)
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized

# Keycloak Admin Service Configuration
keycloak.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:http://localhost:8081}
keycloak.external-url=${KEYCLOAK_EXTERNAL_URL:http://localhost:8081}

# Logging Configuration
logging.level.com.expensetracker=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.web=DEBUG